@startuml
header Sequence Diagram for Message- and Datataflow
Title Accessing Public Timeline As An Unauthorized User


actor "Unauthorized User" as UnauthorizedUser
participant "Webbrowser" as Browser
participant "Chirp.Web" as ChirpWeb
participant "Cheep Repository" as CheepRepo
entity cheepDTO as CheepDTO

UnauthorizedUser -> Browser: Enters website's URL
Browser -> ChirpWeb: HTTP Request: GET URL

ChirpWeb -> CheepRepo: Get cheeps for current page
CheepRepo -> CheepDTO: Sends authorname, message \n and timestamp for each cheep
CheepDTO --> ChirpWeb: Each CheepDTO has a cheep's \n authorname, message and timestamp
|||

ChirpWeb -> GitHub: Requests GitHub image for each cheep's author
alt GitHub user exists
    GitHub --> ChirpWeb: Returns author's GitHub image
else GitHub user does not exist
    GitHub --> ChirpWeb: Returns a GitHub default image
end

ChirpWeb --> Browser: HTTP Response: Content-type text/html,\nContent Public.cshtml & BasePageModel.cshtml
|||

Browser -> ChirpWeb: HTTP Request: GET CSS
ChirpWeb --> Browser: HTTP Response: text/css with style.css

Browser --> UnauthorizedUser: Returns rendered web-page
@enduml