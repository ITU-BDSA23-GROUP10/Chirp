@startuml
header Sequence Diagram for Message- and Datataflow
Title Accessing Public Timeline As An Unauthorized User


actor "Unauthorized User" as UnauthorizedUser
participant "Webbrowser" as Browser
participant "Chirp.Web" as ChirpWeb
participant "Cheep Repository" as CheepRepo
entity cheepDTO as CheepDTO

UnauthorizedUser -> Browser: Enters website's URL
Browser -> ChirpWeb: HTTP Request: GET URL, GET CSS
Return HTTP Reponse: ACKs of GET Requests

ChirpWeb -> CheepRepo: Requests cheeps for current page
CheepRepo -> CheepDTO: Return authorname, message and timestamp for each cheep
CheepDTO --> ChirpWeb:

ChirpWeb -> GitHub: Requests GitHub image for each cheep's author
alt GitHub user exists
    GitHub --> ChirpWeb: Returns author's GitHub image
else GitHub user does not exist
    GitHub --> ChirpWeb: Returns a GitHub default image
end

ChirpWeb --> Browser: Returns Response Headers: text/html, text/css
ChirpWeb --> Browser: Writes Public.cshtml, BasePageModel.cshtml and style.css
Browser -> UnauthorizedUser: Returns rendered web-page
@enduml